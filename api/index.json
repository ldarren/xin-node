{ 
    "deps":{
		"util": "./util",
		"ums": "./ums",
		"config": "./config",
		"s3": "./s3",
		"web": ["context", "webServer"]
    },
    "routes":{
        "ERR/#msg":[
            []
        ],
        "END/#msg":[
            []
        ],
		"/s3/list":[
			["ums", "readHeaderAuth", "req", "token"],
			["ums", "verify", "token", "jwt"],
			["s3", "list", "emails"],
			["util", "output", "emails"],
			[]
		],
		"/s3/read/:key":[
			["ums", "readHeaderAuth", "req", "token"],
			["ums", "verify", "token", "jwt"],
			["s3", "read", "email"],
			["util", "output", "email"],
			[]
		],
		"/user/create": [
			["util", "filterMethod", "req", "res"],
			["web", "getBody", "req", "body"],
			["util", ["validate", {
				"accessToken": {"type": "string", "required": 1},
				"idToken": {"type": "string", "required": 1},
				"company": {"type": "string", "required": 1}
			}], "body"],
			["ums", "checkCompany", "body", "#xin.com"],
			["ums", "verify", "body", "jwt"],
			["ums", "setUser", "jwt", "body", "output"],
			["util", "output", "output"],
			[]
		],
		"config/mailbox/create": [
			["web", "getBody", "req", "body"],
			["util", ["validate", {
				"name": {"type": "string", "required": 1},
				"region": {"type": "string", "required": 1},
				"Bucket": {"type": "string", "required": 1},
				"IdentityPoolId": {"type": "string", "required": 1},
				"UserPoolId": {"type": "string", "required": 1},
				"ClientId": {"type": "string", "required": 1}
			}], "body"],
			["config", "set", "user", "body", "group"],
			["config", "get", "group"],
			["util", "output", "group"],
			[]
		],
		"config/mailbox/update": [
			["ums", "getUser", "jwt", "user"],
			["web", "getBody", "req", "body"],
			["util", ["validate", {
				"name": {"type": "string"},
				"region": {"type": "string"},
				"Bucket": {"type": "string"},
				"IdentityPoolId": {"type": "string"},
				"UserPoolId": {"type": "string"},
				"ClientId": {"type": "string"}
			}], "body"],
			["config", "update", "user", "group", "body", "result"],
			["util", "output", "result"],
			[]
		],
		"config/mailbox/list": [
			["config", "list", "user", ":output"],
			["util", "output", ":output"],
			[]
		],
		"config/mailbox/detail": [
			["config", "get", "group"],
			["util", "output", "group"],
			[]
		],
		"config/mailbox/delete": [
			["util", "filterMethod", "req", "res"],
			["ums", "readHeaderAuth", "req", "token"],
			["ums", "verify", "token", "jwt"],
			["ums", "getUser", "jwt", "user"],
			["config", "delete", "user", "group", "result"],
			["util", "output", "result"],
			[]
		],
		"/config/mailbox": [
			["util", "filterMethod", "req", "res"],
			["ums", "readHeaderAuth", "req", "token"],
			["ums", "verify", "token", "jwt"],
			["ums", "getUser", "jwt", "user"],
			["util", "branch", "req", {
				"POST": "config/mailbox/create",
				"GET": "config/mailbox/list"
			}]
		],
		"/config/mailbox/name/:name": [
			["util", "extractParams", "group"],
			["util", ["validate", {
				"name": {"type": "string", "required": 1}
			}], "group"],
			["util", "filterMethod", "req", "res"],
			["util", "branch", "req", {
				"GET": "config/mailbox/detail",
				"DELETE": "config/mailbox/delete"
			}]
        ],
		"/config/mailbox/:id": [
			["util", "extractParams", "group"],
			["util", ["validate", {
				"id": {"type": "number", "required": 1}
			}], "group"],
			["util", "filterMethod", "req", "res"],
			["ums", "readHeaderAuth", "req", "token"],
			["ums", "verify", "token", "jwt"],
			["util", "branch", "req", {
				"PUT": "config/mailbox/update"
			}]
        ]
    }
}
